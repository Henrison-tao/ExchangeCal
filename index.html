<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>匯率計算</title>

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            var fee1 = 1 - 0.15 / 100;
            var fee2 = 1 - 0.25 / 100;
            $("#p_Buy").val(0);
            $("#p_BuyAm").val(1);
            $("#10p").text(0);
            $("#20p").text(0);
            $("#30p").text(0);

            $("#p_Buy").change(function () {
                var b = $("#p_Buy").val();
                var a = $("#p_BuyAm").val();
                if (b != 0 && a != 0) {
                    compute(b, a);
                }
            });
            $("#p_BuyAm").change(function () {
                var b = $("#p_Buy").val();
                var a = $("#p_BuyAm").val();
                if (b != 0 && a != 0) {
                    compute(b, a);
                }
            });

            function compute(b, a) {
                var b_avg15 = (b * a) / (a * fee1);
                var b_avg25 = (b * a) / (a * fee2);
                var s_avg15 = (b * a) / (a * fee1 * fee1);
                var s_avg25 = (b * a) / (a * fee2 * fee2);

                $("#p_BuyOuput15").val(b_avg15.toFixed(4));
                $("#p_BuyOuput25").val(b_avg25.toFixed(4));
                $("#p_sellOuput15").val(s_avg15.toFixed(4));
                $("#p_sellOuput25").val(s_avg25.toFixed(4));
                $("#10p").text((s_avg15 * 1.1).toFixed(4));
                $("#20p").text((s_avg15 * 1.2).toFixed(4));
                $("#30p").text((s_avg15 * 1.3).toFixed(4));

            };
        });
    </script>
</head>

<body>
    <div>
        <h3 align="center">匯率交易</h3>
        <table style="width: 100%" border="1">

            <tr style="width: 50%">
                <th align="center"></th>
                <th align="center">買入</th>
                <th align="center">數量</th>
                <td align="center">買入成本價</td>
                <td align="center">最少賣出價</td>
            </tr>
            <tr>
                <th>0.015% 手續費</th>
                <td rowspan="2" align="center">
                    <input id="p_Buy" type="number" />
                </td>
                <td rowspan="2" align="center">
                    <input id="p_BuyAm" type="number" />
                </td>
                <td align="center">
                    <input id="p_BuyOuput15" type="number" type="number" readonly />
                </td>
                <td align="center">
                    <input id="p_sellOuput15" type="number" type="number" readonly />
                </td>
            </tr>
            <tr style="width: 50%">
                <th>0.025% 手續費</th>
                <td align="center">
                    <input id="p_BuyOuput25" type="number" readonly />
                </td>
                <td align="center">
                    <input id="p_sellOuput25" type="number" readonly />
                </td>
            </tr>
        </table>
    </div>
    <hr>
    <div>
        參考掛單獲利價目
        <table border="1">
            <tr>
                <th>
                    10%
                </th>
                <td>
                    <h8 id="10p"></h8>
                </td>
            </tr>
            <tr>
                <th>
                    20%
                </th>
                <td>
                    <h8 id="20p"></h8>
                </td>
            </tr>
            <tr>
                <th>
                    30%
                </th>
                <td>
                    <h8 id="30p"></h8>
                </td>
            </tr>
        </table>
    </div>
    <div>
        <h3 align="center">買入平均價</h3>

    </div>
</body>
</html>
